<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·ªãch tr·ª±c tu·∫ßn</title>
    <%- include("../admin/layout/head.ejs") %>
    <link rel="stylesheet" href="/static/css/duty/style.css">
    <% if (data && data.trackper > 1){%>
    <link rel="stylesheet" href="/static/css/duty/styleprint.css">
    <% } %>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;500;700&family=Times+New+Roman&display=swap" rel="stylesheet">
</head>
<body>

    <div class="page-container">
        <%- include("../admin/layout/nav.ejs") %>
        <header class="document-header">
            <div class="header-left">
                <span>C√îNG AN T·ªàNH ƒê·ªíNG TH√ÅP</span><br>
                <strong><u>C√îNG AN X√É M·ª∏ AN H∆ØNG</u></strong><br>
                <div class="header-line"></div>
            </div>
            <div class="header-right">
                <strong>C·ªòNG H√íA X√É H·ªòI CH·ª¶ NGHƒ®A VI·ªÜT NAM</strong><br>
                <b><u>ƒê·ªôc l·∫≠p - T·ª± do - H·∫°nh ph√∫c</u></b>
                <div class="header-line"></div>
            </div>
        </header>

        <section class="document-body">
            <div class="document-title">
                <h2 id="schedule-title">L·ªäCH TR·ª∞C TU·∫¶N</h2>
                <p id="schedule-subtitle"></p>
            </div>
            
            <div class="schedule-controls">
                <div class="control-group">
                     <label for="start-date">Ch·ªçn tu·∫ßn:</label>
                     <input type="date" id="start-date" title="Ch·ªâ c√≥ th·ªÉ ch·ªçn ng√†y Th·ª© Hai">
                </div>
                
                <div class="control-group">
                    
                    <button id="save-to-json-btn" class="btn btn-success" <% if (data && data.trackper > 2){%>style="display: none;"<% } %>>üíæ L∆∞u L·ªãch tr·ª±c</button>
                    
                    <!-- <button id="load-from-json-btn" class="btn btn-primary">üìÇ T·∫£i t·ª´ JSON</button> -->
                    <button id="export-btn" class="btn btn-export"<% if (data && data.trackper > 1){%>style="display: none;"<% } %>>üñ®Ô∏è In</button>
                    <input type="file" id="load-json-input" accept=".json" style="display: none;">
                </div>
                
                 <div class="control-group" <% if (data && data.trackper > 1){%>style="display: none;"<% } %>>
                    <label for="template-select">Ph∆∞∆°ng √°n c√≥ s·∫µn:</label>
                    <select id="template-select"></select>
                    <button id="apply-template-btn" class="btn">√Åp d·ª•ng</button>
                    <button id="delete-plan-btn" class="btn btn-danger">X√≥a</button>
                </div>
                <div class="control-group" <% if (data && data.trackper > 1){%>style="display: none;"<% } %>>
                    <input type="text" id="new-plan-name" placeholder="T√™n ph∆∞∆°ng √°n m·ªõi...">
                    <button id="save-plan-btn" class="btn btn-success">L∆∞u P.√°n</button>
                </div>

                 <div class="control-group">
                    <button id="generate-schedule-btn" class="btn btn-info" style="display: none;">üìã L·∫•y d·ªØ li·ªáu</button>
                    <!-- <button id="export-btn" class="btn btn-export">üñ®Ô∏è In</button> -->
                </div>
            </div>

            <div class="table-wrapper">
                <table class="schedule-table">
                    <thead>
                        <tr>
                            <th rowspan="2">Ng√†y th√°ng nƒÉm</th>
                            <th id="main-header-cell" colspan="5">Tr·ª±c chi·∫øn</th>
                            <th rowspan="2">Tr·ª±c L√£nh ƒë·∫°o</th>
                            <th rowspan="2">Tr·ª±c ban</th>
                        </tr>
                        <tr id="team-header-row"></tr>
                    </thead>
                    <tbody id="schedule-body"></tbody>
                </table>
            </div>
        </section>
        
        <section class="management-section" <% if (data && data.trackper > 1){%>style="display: none;"<% } %>>
             <h3 id="management-toggle" class="section-toggle">‚öôÔ∏è Qu·∫£n l√Ω danh s√°ch</h3>
             <div id="management-content" class="management-content collapsed">
                <div class="list-manager-card">
                     <h3>üìã Danh s√°ch Th√†nh vi√™n</h3>
                     <div class="add-item-form">
                         <input type="text" id="new-member-name" placeholder="T√™n th√†nh vi√™n">
                         <input type="text" id="new-member-phone" placeholder="S·ªë ƒëi·ªán tho·∫°i">
                         <select id="new-member-position" title="Ch·ªçn ch·ª©c v·ª•"></select>
                         <select id="new-member-team" title="Ch·ªçn t·ªï"></select>
                         <select id="new-member-location" title="Ch·ªçn v·ªã tr√≠ tr·ª±c"></select>
                         <button id="add-member-btn" class="btn btn-primary">Th√™m</button>
                     </div>
                     <ul id="members-list" class="item-list"></ul>
                </div>
                 <div class="list-manager-card">
                     <h3>üìÇ Danh s√°ch T·ªï</h3>
                     <div class="add-item-form">
                         <input type="text" id="new-team-name" placeholder="T√™n t·ªï m·ªõi">
                         <button id="add-team-btn" class="btn btn-primary">Th√™m</button>
                     </div>
                     <ul id="teams-list" class="item-list"></ul>
                 </div>
                 <div class="list-manager-card">
                    <h3>üìç Danh s√°ch V·ªã tr√≠ tr·ª±c</h3>
                    <div class="add-item-form">
                        <input type="text" id="new-location-name" placeholder="T√™n v·ªã tr√≠ m·ªõi">
                        <button id="add-location-btn" class="btn btn-primary">Th√™m</button>
                    </div>
                    <ul id="locations-list" class="item-list"></ul>
                </div>
                <div class="list-manager-card">
                    <h3>üëë Danh s√°ch Ch·ª©c v·ª•</h3>
                    <div class="add-item-form">
                        <input type="text" id="new-position-name" placeholder="T√™n ch·ª©c v·ª• m·ªõi">
                        <button id="add-position-btn" class="btn btn-primary">Th√™m</button>
                    </div>
                    <ul id="positions-list" class="item-list"></ul>
                </div>
             </div>
        </section>
        
    </div>

    <div id="add-person-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Ph√¢n c√¥ng c√°n b·ªô</h3>
                <button id="close-modal-btn" class="close-button">&times;</button>
            </div>
            <div class="modal-body">
                <form id="person-form">
                    <label for="member-select">Ch·ªâ hi·ªÉn th·ªã th√†nh vi√™n trong t·ªï n√†y:</label>
                    <select id="member-select" required></select>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn" id="cancel-modal-btn">H·ªßy</button>
                <button type="submit" form="person-form" class="btn btn-success">Th√™m</button>
            </div>
        </div>
    </div>
    
    <div id="member-info-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="info-modal-title">Th√¥ng tin C√°n b·ªô</h3>
                <button id="close-info-modal-btn" class="close-button">&times;</button>
            </div>
            <div class="modal-body" id="info-modal-body">
                </div>
            <div class="modal-footer">
                <button type="button" class="btn" id="ok-info-modal-btn">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <script src="/static/js/duty/main.js"></script>
    <script src="/static/js/duty/actions.js"></script>
</body>
</html>